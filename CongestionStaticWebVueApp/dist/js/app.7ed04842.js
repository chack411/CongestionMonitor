(function(t){function n(n){for(var o,c,u=n[0],i=n[1],s=n[2],f=0,d=[];f<u.length;f++)c=u[f],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);l&&l(n);while(d.length)d.shift()();return a.push.apply(a,s||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],o=!0,u=1;u<e.length;u++){var i=e[u];0!==r[i]&&(o=!1)}o&&(a.splice(n--,1),t=c(c.s=e[0]))}return t}var o={},r={app:0},a=[];function c(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=o,c.d=function(t,n,e){c.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,n){if(1&n&&(t=c(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)c.d(e,o,function(n){return t[n]}.bind(null,o));return e},c.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(n,"a",n),n},c.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},c.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=n,u=u.slice();for(var s=0;s<u.length;s++)n(u[s]);var l=i;a.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"56d7":function(t,n,e){"use strict";e.r(n);var o=e("2b0e"),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("table",{staticClass:"table table-bordered"},[e("caption",[t._v("Congestion Status")]),t._m(0),t._l(t.results,function(n){return e("tr",{key:n.id},[e("td",{staticClass:"place-name"},[e("span",{attrs:{hidden:""}},[t._v(t._s(n.id))]),e("span",[t._v(t._s(n.placeName))])]),e("td",{staticClass:"people-count"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("span",{key:n.faceCount},[t._v("\n                        "+t._s(n.faceCount)+"\n                    ")])])],1),e("td",{staticClass:"trend-indicator"},[e("transition",{attrs:{name:"mark",mode:"out-in"}},[e("span",{key:n.updown,style:{color:n.indicatorColor}},[t._v("\n                        "+t._s(n.updown)+"\n                    ")])])],1)])})],2)])},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("thead",{staticClass:"thead-light"},[e("tr",{staticClass:"place-header"},[e("th",{attrs:{scope:"col"}},[t._v("Place")]),e("th",{attrs:{scope:"col"}},[t._v("Count")]),e("th",{attrs:{scope:"col"}},[t._v("Trend")])])])}],c=(e("7514"),e("ac6a"),e("bc3a")),u=e.n(c),i=e("1a9a"),s="https://functionappnoodlefinder2.azurewebsites.net",l={},f={up:{mark:"▲",color:"rgb(255, 148, 148)"},down:{mark:"▼",color:"rgb(154, 240, 117)"},stay:{mark:"－",color:"gray"}},d={name:"App",data:function(){return{results:[]}},created:function(){console.log("NODE_ENV=production"),console.log("API_BASE_URL="+s);var t=this;t.getCurrentData().then(function(n){n.forEach(t.faceCountUpdated)}).then(t.getConnectionInfo).then(function(n){var e=n.accessToken,o={accessTokenFactory:function(){if(e){var n=e;return e=null,n}return t.getConnectionInfo().then(function(t){return t.accessToken})}},r=(new i["a"]).withUrl(n.url,o).configureLogging(i["b"].Information).build();r.on("faceCountUpdated",t.faceCountUpdated),r.onclose(function(){console.log("disconnected"),setTimeout(function(){t.startConnection(r)},2e3)}),t.startConnection(r)}).catch(console.error)},methods:{getCurrentData:function(){return u.a.post("".concat(s,"/api/GetCurrentFaceData"),null,l).then(function(t){return t.data}).catch(function(){return{}})},getConnectionInfo:function(){return u.a.post("".concat(s,"/api/SignalRInfo"),null,l).then(function(t){return t.data}).catch(function(){return{}})},startConnection:function(t){console.log("connecting..."),t.start().then(function(){console.log("connected!")}).catch(function(n){console.error(n),setTimeout(function(){this.startConnection(t)},2e3)})},faceCountUpdated:function(t){var n=this.results.find(function(n){return n.id===t.id});n?(n.faceCount<t.faceCount?(o["a"].set(n,"updown",f.up.mark),o["a"].set(n,"indicatorColor",f.up.color)):n.faceCount>t.faceCount&&(o["a"].set(n,"updown",f.down.mark),o["a"].set(n,"indicatorColor",f.down.color)),o["a"].set(n,"faceCount",t.faceCount)):(t.updown=f.stay.mark,t.indicatorColor=f.stay.color,this.results.push(t))}}},p=d,h=e("2877"),C=Object(h["a"])(p,r,a,!1,null,null,null),g=C.exports;o["a"].config.productionTip=!0,new o["a"]({render:function(t){return t(g)}}).$mount("#app")}});
//# sourceMappingURL=app.7ed04842.js.map